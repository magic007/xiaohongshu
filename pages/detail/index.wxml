<!--pages/detail/index.wxml-->
<view class="detail-container">
  <!-- 图片轮播 -->
  <swiper class="image-swiper" indicator-dots="{{true}}" autoplay="{{false}}" circular="{{true}}">
    <swiper-item wx:for="{{noteData.images}}" wx:key="index">
      <image src="{{item}}" mode="aspectFill" class="swiper-image"/>
    </swiper-item>
  </swiper>

  <!-- 用户信息区域 -->
  <view class="user-info">
    <view class="user-header">
      <view class="user-left">
        <view class="{{noteData.userInfo.avatar ? 'avatar' : 'avatar avatar-gradient'}}">
          <image wx:if="{{noteData.userInfo.avatar}}" src="{{noteData.userInfo.avatar}}" mode="aspectFill"/>
        </view>
        <view class="user-meta">
          <text class="nickname">{{noteData.userInfo.nickname}}</text>
        </view>
      </view>
      <button class="follow-btn" bindtap="handleFollow">{{isFollowing ? '已关注' : '关注'}}</button>
    </view>
  </view>

  <!-- 笔记内容 -->
  <view class="note-content">
    <text class="content">{{noteData.content}}</text>
    
    <!-- 标签 -->
    <view class="tags">
      <text class="tag" wx:for="{{noteData.tags}}" wx:key="index">#{{item}}</text>
    </view>

    <!-- 发布时间 -->
    <view class="publish-info">
      <text class="time">{{noteData.createTime}} {{noteData.location ? '·' : ''}} 广东</text>
    </view>

    <!-- 评论数量提示 -->
    <view class="comment-count" wx:if="{{noteData.commentCount > 0}}">
      <text>共 {{noteData.commentCount}}+ 条评论</text>
    </view>
  </view>

  <!-- 底部操作栏 -->
  <action-bar 
    noteId="{{noteData.objectId}}"
    isLiked="{{isLiked}}"
    isFavorited="{{isFavorited}}"
    likeCount="{{noteData.likeCount}}"
    favoriteCount="{{noteData.favoriteCount}}"
    commentCount="{{noteData.commentCount}}"
    bind:like="handleLike"
    bind:favorite="handleFavorite"
    bind:comment="handleComment"
    bind:share="handleShare"
  />
</view>